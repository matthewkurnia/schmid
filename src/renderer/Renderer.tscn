[gd_scene load_steps=35 format=2]

[ext_resource path="res://src/renderer/Compositor.gd" type="Script" id=1]
[ext_resource path="res://src/renderer/MotionTracker.gd" type="Script" id=2]
[ext_resource path="res://src/renderer/StrokesContainer.gd" type="Script" id=3]
[ext_resource path="res://src/renderer/Strokes.tscn" type="PackedScene" id=4]
[ext_resource path="res://assets/strokes/debug.png" type="Texture" id=5]
[ext_resource path="res://assets/canvas_texture.png" type="Texture" id=6]
[ext_resource path="res://assets/paper_texture.png" type="Texture" id=7]
[ext_resource path="res://src/shaders/MotionTracker.gdshader" type="Shader" id=8]
[ext_resource path="res://src/shaders/StrokeRenderer.gdshader" type="Shader" id=9]
[ext_resource path="res://src/shaders/StrokeParticles.gdshader" type="Shader" id=10]
[ext_resource path="res://assets/strokes/packed_strokes.png" type="TextureArray" id=11]
[ext_resource path="res://src/shaders/Bleed.gdshader" type="Shader" id=12]

[sub_resource type="QuadMesh" id=31]

[sub_resource type="Shader" id=34]
code = "shader_type spatial;
render_mode unshaded;

void fragment() {
	ALBEDO = texture(CBUFFER, SCREEN_UV).rgb;
}"

[sub_resource type="ShaderMaterial" id=35]
shader = SubResource( 34 )

[sub_resource type="QuadMesh" id=1]

[sub_resource type="ShaderMaterial" id=3]
shader = ExtResource( 8 )
shader_param/z_near = 0.985
shader_param/z_far = 0.995
shader_param/linear_velocity = null
shader_param/angular_velocity = null

[sub_resource type="ViewportTexture" id=21]
viewport_path = NodePath("Compositor/Base")

[sub_resource type="ViewportTexture" id=45]
viewport_path = NodePath("Compositor/Buffered")

[sub_resource type="ViewportTexture" id=30]
viewport_path = NodePath("Compositor/DepthMotion")

[sub_resource type="ViewportTexture" id=15]
viewport_path = NodePath("Compositor/Base")

[sub_resource type="ShaderMaterial" id=14]
resource_local_to_scene = true
shader = ExtResource( 9 )
shader_param/debug_view = false
shader_param/screen_height = 600.0
shader_param/screen_width = 1024.0
shader_param/canvas_roughness = 10.0
shader_param/pigmentation = 1.0
shader_param/smudge_amount = 0.0
shader_param/distorsion_amount = 0.002
shader_param/minimum_distorsion_multiplier = 0.4
shader_param/respawn_blend_frames = 32
shader_param/canvas_texture = ExtResource( 6 )
shader_param/source = SubResource( 15 )
shader_param/depth_motion = SubResource( 30 )
shader_param/config_buffer = SubResource( 45 )
shader_param/debug_stroke = ExtResource( 5 )
shader_param/stroke_types = ExtResource( 11 )

[sub_resource type="ViewportTexture" id=39]
viewport_path = NodePath("Compositor/Buffered")

[sub_resource type="ViewportTexture" id=8]
viewport_path = NodePath("Compositor/DepthMotion")

[sub_resource type="Image" id=52]
data = {
"data": PoolByteArray( 131, 210, 43, 57, 178, 158, 141, 60, 0, 0, 128, 63, 0, 0, 128, 63, 79, 106, 135, 61, 80, 66, 84, 60, 0, 0, 128, 63, 0, 0, 128, 63, 207, 89, 252, 59, 94, 58, 252, 61, 0, 0, 128, 63, 0, 0, 128, 63, 0, 105, 146, 61, 245, 104, 227, 61, 0, 0, 128, 63, 0, 0, 128, 63, 140, 149, 233, 61, 229, 106, 73, 62, 0, 0, 128, 63, 0, 0, 128, 63, 143, 55, 222, 61, 92, 251, 21, 61, 0, 0, 128, 63, 0, 0, 128, 63, 106, 227, 248, 59, 104, 57, 106, 62, 0, 0, 128, 63, 0, 0, 128, 63, 27, 248, 34, 62, 148, 175, 47, 61, 0, 0, 128, 63, 0, 0, 128, 63, 102, 150, 99, 61, 73, 28, 73, 62, 0, 0, 128, 63, 0, 0, 128, 63, 169, 168, 133, 61, 163, 152, 151, 62, 0, 0, 128, 63, 0, 0, 128, 63, 47, 192, 231, 61, 72, 130, 164, 62, 0, 0, 128, 63, 0, 0, 128, 63, 94, 232, 152, 60, 133, 115, 165, 62, 0, 0, 128, 63, 0, 0, 128, 63, 253, 35, 141, 61, 230, 18, 223, 62, 0, 0, 128, 63, 0, 0, 128, 63, 225, 179, 153, 61, 220, 226, 21, 63, 0, 0, 128, 63, 0, 0, 128, 63, 196, 248, 143, 60, 105, 103, 228, 62, 0, 0, 128, 63, 0, 0, 128, 63, 194, 103, 19, 62, 220, 11, 232, 62, 0, 0, 128, 63, 0, 0, 128, 63, 186, 158, 208, 61, 125, 11, 3, 63, 0, 0, 128, 63, 0, 0, 128, 63, 146, 51, 27, 59, 86, 159, 8, 63, 0, 0, 128, 63, 0, 0, 128, 63, 109, 217, 144, 60, 40, 44, 50, 63, 0, 0, 128, 63, 0, 0, 128, 63, 65, 27, 107, 61, 19, 61, 78, 63, 0, 0, 128, 63, 0, 0, 128, 63, 231, 127, 241, 59, 43, 94, 77, 63, 0, 0, 128, 63, 0, 0, 128, 63, 185, 175, 210, 61, 181, 232, 42, 63, 0, 0, 128, 63, 0, 0, 128, 63, 78, 220, 47, 62, 92, 69, 47, 63, 0, 0, 128, 63, 0, 0, 128, 63, 108, 60, 21, 62, 204, 108, 71, 63, 0, 0, 128, 63, 0, 0, 128, 63, 152, 55, 45, 62, 206, 97, 25, 63, 0, 0, 128, 63, 0, 0, 128, 63, 242, 216, 128, 62, 137, 162, 28, 63, 0, 0, 128, 63, 0, 0, 128, 63, 242, 212, 95, 62, 186, 128, 11, 63, 0, 0, 128, 63, 0, 0, 128, 63, 110, 105, 92, 62, 53, 101, 55, 63, 0, 0, 128, 63, 0, 0, 128, 63, 183, 254, 69, 62, 254, 43, 227, 62, 0, 0, 128, 63, 0, 0, 128, 63, 60, 62, 61, 62, 53, 76, 182, 62, 0, 0, 128, 63, 0, 0, 128, 63, 84, 245, 120, 62, 46, 222, 240, 62, 0, 0, 128, 63, 0, 0, 128, 63, 140, 141, 138, 62, 209, 81, 198, 62, 0, 0, 128, 63, 0, 0, 128, 63, 78, 42, 123, 62, 209, 1, 156, 62, 0, 0, 128, 63, 0, 0, 128, 63, 104, 109, 163, 62, 246, 44, 150, 62, 0, 0, 128, 63, 0, 0, 128, 63, 4, 216, 33, 62, 168, 175, 143, 62, 0, 0, 128, 63, 0, 0, 128, 63, 231, 209, 157, 62, 175, 81, 87, 62, 0, 0, 128, 63, 0, 0, 128, 63, 231, 114, 132, 62, 141, 85, 100, 62, 0, 0, 128, 63, 0, 0, 128, 63, 174, 188, 72, 62, 160, 147, 77, 62, 0, 0, 128, 63, 0, 0, 128, 63, 17, 212, 159, 62, 207, 108, 183, 62, 0, 0, 128, 63, 0, 0, 128, 63, 226, 233, 189, 62, 134, 10, 161, 62, 0, 0, 128, 63, 0, 0, 128, 63, 82, 86, 187, 62, 254, 20, 102, 62, 0, 0, 128, 63, 0, 0, 128, 63, 31, 220, 164, 62, 229, 46, 226, 62, 0, 0, 128, 63, 0, 0, 128, 63, 186, 167, 189, 62, 44, 222, 243, 62, 0, 0, 128, 63, 0, 0, 128, 63, 34, 222, 208, 62, 147, 138, 192, 62, 0, 0, 128, 63, 0, 0, 128, 63, 219, 74, 0, 63, 237, 159, 207, 62, 0, 0, 128, 63, 0, 0, 128, 63, 252, 63, 237, 62, 143, 96, 153, 62, 0, 0, 128, 63, 0, 0, 128, 63, 52, 123, 246, 62, 157, 38, 247, 62, 0, 0, 128, 63, 0, 0, 128, 63, 237, 243, 215, 62, 195, 193, 95, 62, 0, 0, 128, 63, 0, 0, 128, 63, 102, 134, 219, 62, 45, 85, 233, 62, 0, 0, 128, 63, 0, 0, 128, 63, 240, 217, 210, 62, 60, 169, 13, 63, 0, 0, 128, 63, 0, 0, 128, 63, 178, 197, 248, 62, 14, 102, 21, 63, 0, 0, 128, 63, 0, 0, 128, 63, 186, 143, 15, 63, 20, 112, 24, 63, 0, 0, 128, 63, 0, 0, 128, 63, 228, 83, 10, 63, 164, 12, 7, 63, 0, 0, 128, 63, 0, 0, 128, 63, 120, 12, 238, 62, 66, 101, 49, 63, 0, 0, 128, 63, 0, 0, 128, 63, 235, 164, 4, 63, 14, 148, 41, 63, 0, 0, 128, 63, 0, 0, 128, 63, 232, 115, 215, 62, 203, 78, 35, 63, 0, 0, 128, 63, 0, 0, 128, 63, 226, 190, 198, 62, 94, 21, 55, 63, 0, 0, 128, 63, 0, 0, 128, 63, 156, 4, 224, 62, 138, 111, 75, 63, 0, 0, 128, 63, 0, 0, 128, 63, 252, 236, 190, 62, 16, 30, 31, 63, 0, 0, 128, 63, 0, 0, 128, 63, 95, 230, 167, 62, 84, 210, 43, 63, 0, 0, 128, 63, 0, 0, 128, 63, 191, 194, 177, 62, 78, 240, 12, 63, 0, 0, 128, 63, 0, 0, 128, 63, 209, 70, 146, 62, 148, 31, 13, 63, 0, 0, 128, 63, 0, 0, 128, 63, 246, 118, 162, 62, 64, 125, 66, 63, 0, 0, 128, 63, 0, 0, 128, 63, 131, 58, 134, 62, 197, 113, 71, 63, 0, 0, 128, 63, 0, 0, 128, 63, 202, 117, 65, 62, 77, 75, 99, 63, 0, 0, 128, 63, 0, 0, 128, 63, 70, 234, 126, 62, 36, 160, 96, 63, 0, 0, 128, 63, 0, 0, 128, 63, 136, 197, 156, 62, 202, 210, 87, 63, 0, 0, 128, 63, 0, 0, 128, 63, 106, 66, 182, 62, 144, 250, 82, 63, 0, 0, 128, 63, 0, 0, 128, 63, 224, 79, 185, 62, 197, 15, 123, 63, 0, 0, 128, 63, 0, 0, 128, 63, 81, 150, 174, 62, 89, 133, 103, 63, 0, 0, 128, 63, 0, 0, 128, 63, 67, 193, 219, 62, 132, 142, 100, 63, 0, 0, 128, 63, 0, 0, 128, 63, 89, 61, 153, 62, 57, 235, 116, 63, 0, 0, 128, 63, 0, 0, 128, 63, 158, 130, 95, 62, 25, 112, 119, 63, 0, 0, 128, 63, 0, 0, 128, 63, 6, 156, 1, 62, 227, 66, 105, 63, 0, 0, 128, 63, 0, 0, 128, 63, 3, 171, 27, 62, 234, 16, 127, 63, 0, 0, 128, 63, 0, 0, 128, 63, 239, 173, 78, 62, 157, 65, 78, 63, 0, 0, 128, 63, 0, 0, 128, 63, 54, 84, 41, 61, 67, 126, 122, 63, 0, 0, 128, 63, 0, 0, 128, 63, 75, 35, 212, 61, 204, 91, 83, 63, 0, 0, 128, 63, 0, 0, 128, 63, 4, 51, 142, 61, 145, 40, 101, 63, 0, 0, 128, 63, 0, 0, 128, 63, 236, 162, 188, 61, 35, 64, 121, 63, 0, 0, 128, 63, 0, 0, 128, 63, 149, 225, 94, 60, 59, 93, 100, 63, 0, 0, 128, 63, 0, 0, 128, 63, 12, 168, 1, 63, 5, 204, 109, 63, 0, 0, 128, 63, 0, 0, 128, 63, 43, 73, 219, 62, 163, 132, 124, 63, 0, 0, 128, 63, 0, 0, 128, 63, 211, 36, 0, 63, 146, 116, 79, 63, 0, 0, 128, 63, 0, 0, 128, 63, 25, 247, 23, 63, 86, 239, 69, 63, 0, 0, 128, 63, 0, 0, 128, 63, 13, 128, 11, 63, 226, 21, 93, 63, 0, 0, 128, 63, 0, 0, 128, 63, 230, 136, 11, 63, 122, 110, 64, 63, 0, 0, 128, 63, 0, 0, 128, 63, 29, 34, 29, 63, 208, 207, 42, 63, 0, 0, 128, 63, 0, 0, 128, 63, 24, 139, 25, 63, 115, 11, 96, 63, 0, 0, 128, 63, 0, 0, 128, 63, 153, 180, 42, 63, 180, 118, 79, 63, 0, 0, 128, 63, 0, 0, 128, 63, 110, 57, 40, 63, 74, 67, 113, 63, 0, 0, 128, 63, 0, 0, 128, 63, 49, 54, 26, 63, 92, 255, 126, 63, 0, 0, 128, 63, 0, 0, 128, 63, 43, 207, 14, 63, 53, 44, 113, 63, 0, 0, 128, 63, 0, 0, 128, 63, 213, 106, 50, 63, 188, 189, 125, 63, 0, 0, 128, 63, 0, 0, 128, 63, 220, 50, 66, 63, 213, 56, 120, 63, 0, 0, 128, 63, 0, 0, 128, 63, 253, 138, 52, 63, 137, 171, 103, 63, 0, 0, 128, 63, 0, 0, 128, 63, 54, 78, 64, 63, 0, 10, 94, 63, 0, 0, 128, 63, 0, 0, 128, 63, 68, 11, 78, 63, 167, 235, 74, 63, 0, 0, 128, 63, 0, 0, 128, 63, 197, 159, 56, 63, 59, 2, 76, 63, 0, 0, 128, 63, 0, 0, 128, 63, 143, 0, 88, 63, 248, 79, 88, 63, 0, 0, 128, 63, 0, 0, 128, 63, 91, 90, 75, 63, 9, 160, 105, 63, 0, 0, 128, 63, 0, 0, 128, 63, 154, 72, 67, 63, 26, 214, 58, 63, 0, 0, 128, 63, 0, 0, 128, 63, 171, 75, 83, 63, 137, 236, 54, 63, 0, 0, 128, 63, 0, 0, 128, 63, 227, 218, 44, 63, 196, 154, 52, 63, 0, 0, 128, 63, 0, 0, 128, 63, 77, 211, 70, 63, 43, 7, 19, 63, 0, 0, 128, 63, 0, 0, 128, 63, 48, 94, 58, 63, 84, 70, 39, 63, 0, 0, 128, 63, 0, 0, 128, 63, 81, 116, 83, 63, 244, 210, 34, 63, 0, 0, 128, 63, 0, 0, 128, 63, 44, 9, 96, 63, 85, 153, 55, 63, 0, 0, 128, 63, 0, 0, 128, 63, 211, 137, 102, 63, 168, 93, 30, 63, 0, 0, 128, 63, 0, 0, 128, 63, 251, 7, 87, 63, 134, 215, 254, 62, 0, 0, 128, 63, 0, 0, 128, 63, 33, 118, 98, 63, 85, 236, 9, 63, 0, 0, 128, 63, 0, 0, 128, 63, 94, 238, 91, 63, 34, 156, 194, 62, 0, 0, 128, 63, 0, 0, 128, 63, 99, 157, 109, 63, 254, 246, 230, 62, 0, 0, 128, 63, 0, 0, 128, 63, 61, 206, 116, 63, 234, 225, 26, 63, 0, 0, 128, 63, 0, 0, 128, 63, 152, 48, 120, 63, 0, 187, 254, 62, 0, 0, 128, 63, 0, 0, 128, 63, 40, 55, 125, 63, 128, 146, 183, 62, 0, 0, 128, 63, 0, 0, 128, 63, 93, 240, 111, 63, 196, 103, 181, 62, 0, 0, 128, 63, 0, 0, 128, 63, 137, 236, 120, 63, 106, 196, 123, 62, 0, 0, 128, 63, 0, 0, 128, 63, 189, 170, 103, 63, 123, 7, 92, 62, 0, 0, 128, 63, 0, 0, 128, 63, 102, 67, 99, 63, 58, 188, 151, 62, 0, 0, 128, 63, 0, 0, 128, 63, 32, 111, 101, 63, 30, 192, 6, 62, 0, 0, 128, 63, 0, 0, 128, 63, 206, 155, 80, 63, 217, 61, 111, 62, 0, 0, 128, 63, 0, 0, 128, 63, 141, 167, 87, 63, 244, 217, 35, 62, 0, 0, 128, 63, 0, 0, 128, 63, 161, 98, 82, 63, 49, 215, 159, 62, 0, 0, 128, 63, 0, 0, 128, 63, 42, 139, 114, 63, 109, 163, 44, 62, 0, 0, 128, 63, 0, 0, 128, 63, 179, 110, 125, 63, 62, 71, 197, 61, 0, 0, 128, 63, 0, 0, 128, 63, 60, 179, 112, 63, 224, 240, 163, 61, 0, 0, 128, 63, 0, 0, 128, 63, 219, 201, 96, 63, 122, 52, 215, 60, 0, 0, 128, 63, 0, 0, 128, 63, 216, 84, 122, 63, 4, 255, 174, 59, 0, 0, 128, 63, 0, 0, 128, 63, 209, 215, 79, 63, 45, 59, 178, 61, 0, 0, 128, 63, 0, 0, 128, 63, 128, 184, 66, 63, 27, 24, 97, 62, 0, 0, 128, 63, 0, 0, 128, 63, 124, 167, 65, 63, 21, 11, 5, 62, 0, 0, 128, 63, 0, 0, 128, 63, 109, 243, 66, 63, 155, 172, 249, 59, 0, 0, 128, 63, 0, 0, 128, 63, 215, 241, 54, 63, 228, 141, 168, 61, 0, 0, 128, 63, 0, 0, 128, 63, 12, 138, 84, 63, 130, 130, 11, 60, 0, 0, 128, 63, 0, 0, 128, 63, 186, 118, 42, 63, 201, 64, 70, 60, 0, 0, 128, 63, 0, 0, 128, 63, 191, 33, 36, 63, 15, 55, 44, 62, 0, 0, 128, 63, 0, 0, 128, 63, 232, 95, 50, 63, 4, 250, 50, 62, 0, 0, 128, 63, 0, 0, 128, 63, 32, 229, 46, 63, 4, 235, 113, 62, 0, 0, 128, 63, 0, 0, 128, 63, 233, 96, 34, 63, 172, 143, 164, 61, 0, 0, 128, 63, 0, 0, 128, 63, 201, 178, 23, 63, 92, 25, 65, 62, 0, 0, 128, 63, 0, 0, 128, 63, 175, 153, 21, 63, 58, 183, 233, 61, 0, 0, 128, 63, 0, 0, 128, 63, 48, 34, 11, 63, 131, 202, 36, 61, 0, 0, 128, 63, 0, 0, 128, 63, 129, 201, 27, 63, 86, 175, 179, 59, 0, 0, 128, 63, 0, 0, 128, 63, 221, 187, 12, 63, 225, 241, 53, 62, 0, 0, 128, 63, 0, 0, 128, 63, 74, 125, 239, 62, 79, 233, 182, 61, 0, 0, 128, 63, 0, 0, 128, 63, 166, 46, 254, 62, 13, 41, 50, 62, 0, 0, 128, 63, 0, 0, 128, 63, 106, 230, 9, 63, 75, 186, 154, 62, 0, 0, 128, 63, 0, 0, 128, 63, 34, 178, 252, 62, 150, 206, 70, 60, 0, 0, 128, 63, 0, 0, 128, 63, 169, 197, 210, 62, 169, 158, 248, 61, 0, 0, 128, 63, 0, 0, 128, 63, 14, 84, 162, 62, 164, 1, 184, 61, 0, 0, 128, 63, 0, 0, 128, 63, 143, 67, 202, 62, 181, 164, 221, 60, 0, 0, 128, 63, 0, 0, 128, 63, 210, 221, 184, 62, 8, 47, 5, 62, 0, 0, 128, 63, 0, 0, 128, 63, 133, 160, 173, 62, 149, 166, 115, 58, 0, 0, 128, 63, 0, 0, 128, 63, 110, 149, 139, 62, 251, 77, 236, 61, 0, 0, 128, 63, 0, 0, 128, 63, 18, 155, 143, 62, 237, 235, 253, 60, 0, 0, 128, 63, 0, 0, 128, 63, 130, 174, 79, 62, 107, 192, 169, 59, 0, 0, 128, 63, 0, 0, 128, 63, 190, 236, 93, 62, 148, 161, 252, 61, 0, 0, 128, 63, 0, 0, 128, 63, 23, 185, 36, 62, 150, 244, 4, 62, 0, 0, 128, 63, 0, 0, 128, 63, 160, 97, 227, 62, 184, 107, 10, 59, 0, 0, 128, 63, 0, 0, 128, 63, 165, 47, 27, 63, 233, 148, 146, 62, 0, 0, 128, 63, 0, 0, 128, 63, 219, 240, 15, 63, 252, 250, 224, 62, 0, 0, 128, 63, 0, 0, 128, 63, 9, 32, 33, 63, 39, 214, 184, 62, 0, 0, 128, 63, 0, 0, 128, 63, 67, 143, 31, 63, 58, 131, 242, 62, 0, 0, 128, 63, 0, 0, 128, 63, 44, 172, 48, 63, 54, 210, 173, 62, 0, 0, 128, 63, 0, 0, 128, 63, 194, 121, 52, 63, 106, 205, 225, 62, 0, 0, 128, 63, 0, 0, 128, 63, 197, 195, 43, 63, 141, 196, 5, 63, 0, 0, 128, 63, 0, 0, 128, 63, 50, 79, 68, 63, 238, 91, 210, 62, 0, 0, 128, 63, 0, 0, 128, 63, 21, 76, 58, 63, 3, 98, 13, 63, 0, 0, 128, 63, 0, 0, 128, 63, 202, 28, 67, 63, 49, 148, 160, 62, 0, 0, 128, 63, 0, 0, 128, 63, 56, 193, 65, 63, 209, 165, 247, 62, 0, 0, 128, 63, 0, 0, 128, 63, 202, 132, 47, 63, 122, 104, 24, 63, 0, 0, 128, 63, 0, 0, 128, 63, 77, 99, 31, 63, 184, 138, 21, 63, 0, 0, 128, 63, 0, 0, 128, 63, 55, 60, 20, 63, 189, 57, 184, 62, 0, 0, 128, 63, 0, 0, 128, 63, 231, 210, 1, 63, 130, 113, 114, 62, 0, 0, 128, 63, 0, 0, 128, 63, 162, 249, 127, 63, 252, 228, 39, 63, 0, 0, 128, 63, 0, 0, 128, 63, 178, 252, 123, 63, 249, 236, 69, 63, 0, 0, 128, 63, 0, 0, 128, 63, 45, 183, 108, 63, 73, 225, 59, 63, 0, 0, 128, 63, 0, 0, 128, 63, 188, 232, 118, 63, 74, 194, 97, 63, 0, 0, 128, 63, 0, 0, 128, 63, 63, 225, 103, 63, 9, 226, 89, 63, 0, 0, 128, 63, 0, 0, 128, 63, 86, 50, 97, 63, 63, 83, 111, 63, 0, 0, 128, 63, 0, 0, 128, 63, 183, 213, 114, 63, 231, 4, 113, 63, 0, 0, 128, 63, 0, 0, 128, 63, 147, 109, 83, 63, 156, 27, 125, 63, 0, 0, 128, 63, 0, 0, 128, 63, 229, 201, 80, 63, 103, 36, 216, 62, 0, 0, 128, 63, 0, 0, 128, 63, 247, 19, 139, 62, 183, 226, 51, 63, 0, 0, 128, 63, 0, 0, 128, 63 ),
"format": "RGBAFloat",
"height": 1,
"mipmaps": false,
"width": 185
}

[sub_resource type="ImageTexture" id=51]
image = SubResource( 52 )
size = Vector2( 185, 1 )

[sub_resource type="ViewportTexture" id=10]
viewport_path = NodePath("Compositor/Base")

[sub_resource type="ShaderMaterial" id=7]
resource_local_to_scene = true
shader = ExtResource( 10 )
shader_param/respawn_blend_frames = 32
shader_param/velocity_cutoff = 0.005
shader_param/anti_clump_velocity = 0.3
shader_param/amount = 185.0
shader_param/scale_random_amount = null
shader_param/emission_box_extents = Vector3( 512, 300, 1 )
shader_param/max_displacement_alowed = 60.0
shader_param/angle_jitter = 0.1
shader_param/scale_minimum = 0.383
shader_param/scale_maximum = 0.506
shader_param/scale_jitter = 0.0
shader_param/source = SubResource( 10 )
shader_param/depth_motion = SubResource( 8 )
shader_param/config_buffer = SubResource( 39 )
shader_param/raw_position_data = SubResource( 51 )

[sub_resource type="ViewportTexture" id=49]
viewport_path = NodePath("Compositor/Buffered")

[sub_resource type="OpenSimplexNoise" id=26]
period = 0.1

[sub_resource type="NoiseTexture" id=27]
as_normalmap = true
noise = SubResource( 26 )

[sub_resource type="ShaderMaterial" id=24]
resource_local_to_scene = true
shader = ExtResource( 12 )
shader_param/buffer_width = 32
shader_param/screen_width = 1024.0
shader_param/screen_height = 600.0
shader_param/shadow_threshold = 0.35
shader_param/shadow_fade_distance = 0.05
shader_param/shadow_lod = 4.0
shader_param/shadow_cutoff = 0.34
shader_param/shadow_fringe_bias = Color( 1, 1, 1, 1 )
shader_param/shadow_fringe_amount = 0.5
shader_param/watercolor_mode = true
shader_param/value_based_bleed = false
shader_param/bleed_amount = 10.0
shader_param/max_distorsion = 0.0007
shader_param/min_distorsion = 0.0002
shader_param/noise = SubResource( 27 )
shader_param/config_buffer = SubResource( 49 )

[sub_resource type="Shader" id=19]
code = "shader_type canvas_item;
render_mode blend_mul;

uniform float canvas_depth: hint_range(0.0, 1.0, 0.05) = 0.5;
uniform vec4 tint: hint_color;

void fragment() {
	float depth = texture(TEXTURE, UV).x;
	depth = (1.0 - depth) * canvas_depth;
	COLOR = mix(vec4(1), tint, depth);
}
"

[sub_resource type="ShaderMaterial" id=20]
shader = SubResource( 19 )
shader_param/canvas_depth = 0.35
shader_param/tint = Color( 0.27451, 0.223529, 0.223529, 1 )

[node name="Renderer" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2

[node name="Compositor" type="ViewportContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
stretch = true
script = ExtResource( 1 )

[node name="Buffered" type="Viewport" parent="Compositor"]
size = Vector2( 1024, 600 )
handle_input_locally = false
keep_3d_linear = true
render_target_v_flip = true
render_target_update_mode = 3

[node name="Camera" type="Camera" parent="Compositor/Buffered"]
cull_mask = 524287

[node name="MeshInstance" type="MeshInstance" parent="Compositor/Buffered/Camera"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.3 )
layers = 262144
mesh = SubResource( 31 )
material/0 = SubResource( 35 )

[node name="DepthMotion" type="Viewport" parent="Compositor"]
size = Vector2( 1024, 600 )
handle_input_locally = false
keep_3d_linear = true
render_target_v_flip = true
render_target_update_mode = 3

[node name="Camera" type="Camera" parent="Compositor/DepthMotion"]
cull_mask = 786431
current = true

[node name="MotionTracker" type="MeshInstance" parent="Compositor/DepthMotion/Camera"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.3 )
layers = 524288
mesh = SubResource( 1 )
material/0 = SubResource( 3 )
script = ExtResource( 2 )

[node name="Base" type="Viewport" parent="Compositor"]
size = Vector2( 1024, 600 )
handle_input_locally = false
render_target_update_mode = 3
shadow_atlas_size = 256

[node name="Camera" type="Camera" parent="Compositor/Base"]
cull_mask = 262143
current = true

[node name="SceneRoot" type="Node" parent="Compositor"]

[node name="StrokesContainer" type="ViewportContainer" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
stretch = true
script = ExtResource( 3 )

[node name="Viewport" type="Viewport" parent="StrokesContainer"]
size = Vector2( 1024, 600 )
own_world = true
transparent_bg = true
handle_input_locally = false
usage = 0
render_target_update_mode = 3

[node name="AntiNoise" type="TextureRect" parent="StrokesContainer/Viewport"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
texture = SubResource( 21 )
flip_v = true

[node name="Strokes" parent="StrokesContainer/Viewport" instance=ExtResource( 4 )]
material = SubResource( 14 )
position = Vector2( 512, 300 )
amount = 185
process_material = SubResource( 7 )

[node name="Distorsion" type="ColorRect" parent="."]
material = SubResource( 24 )
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2

[node name="Canvas" type="TextureRect" parent="."]
material = SubResource( 20 )
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
texture = ExtResource( 7 )
expand = true
stretch_mode = 7
